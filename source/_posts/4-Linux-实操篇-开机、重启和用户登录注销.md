---
title: 🔄 4-Linux 实操篇 - 开机、重启和用户登录注销

date: 2025-02-26 18:00:00
categories: [Linux]
tags: [Linux, 关机, 重启, 用户管理]
author: "kkyu9527"
cover: /images/LinuxNode/LinuxNodeCover.png
---

# 🔄 4-Linux 实操篇 - 开机、重启和用户登录注销

## 🎯 4.1 关机和重启命令

### 📌 4.1.1 关机与重启的基本命令

在 Linux 中，服务器通常是 **长时间运行的**，但在维护、更新或突发情况时，我们可能需要 **关机或重启**。

|        命令         |             作用              |
|:-----------------:|:---------------------------:|
| `shutdown -h now` |            立即关机             |
|  `shutdown -h 1`  |          1 分钟后自动关机          |
| `shutdown -r now` |           立即重启计算机           |
|      `halt`       | 关机，作用与 `shutdown -h now` 类似 |
|     `reboot`      |           立即重启计算机           |
|      `sync`       |   **强制将内存数据同步到磁盘**，避免数据丢失   |

### 🔥 4.1.2 关机与重启的注意事项

1️⃣ **`sync` 命令的重要性** 🚀

> **`sync` 用于确保数据安全**，它会将 **内存中的数据** 同步到 **磁盘**，防止数据丢失。
>
> **建议在执行 `shutdown` / `reboot` / `halt` 之前先运行 `sync`！**

```bash
sync  # 强制同步内存数据到磁盘
shutdown -h now  # 立即关机
```

2️⃣ **定时关机/重启**

**定时 10 分钟后关机：**
```bash
shutdown -h +10
```
**定时 30 分钟后重启：**
```bash
shutdown -r +30
```
**取消定时关机/重启：**
```bash
shutdown -c
```

3️⃣ **广播关机通知** 📨
```bash
shutdown -h +5 "服务器将在 5 分钟后关机，请保存数据！"
```
📌 这样，所有已登录用户都会收到 **系统即将关机的消息**。

---

## 👤 4.2 用户登录和注销

### 🔑 4.2.1 用户登录的基本概念

在 Linux 系统中，**用户分为普通用户和超级用户（root）**。

🔹 **root 用户（管理员）**：
- **拥有最高权限**，可以修改所有文件和系统配置。
- **不建议直接使用 root 登录**，避免误操作影响整个系统。

🔹 **普通用户**：
- **权限受限**，不能修改系统关键文件。
- **可以使用 `sudo` 执行管理员权限的操作**。

📌 **建议使用普通用户登录，必要时再切换为 root 用户！**

---

### 🔄 4.2.2 如何切换用户？

📌 **切换到 root 用户**
```bash
su -
```
**或者**
```bash
su - root
```
然后输入 **root 用户的密码**，即可切换到超级管理员身份。

📌 **普通用户使用 `sudo` 运行管理员命令**
```bash
sudo apt update  # 以管理员权限执行 apt 更新
```
第一次使用 `sudo` 需要输入 **当前用户的密码**。

📌 **切换到普通用户**
```bash
su - 用户名
```
例如：
```bash
su - john  # 切换到 john 用户
```

📌 **切换回上一个用户**
```bash
exit
```

---

### 🚪 4.2.3 退出/注销用户

🔹 **注销当前用户**（在终端下有效）：
```bash
logout
```
🔹 **注销并回到登录界面（仅适用于桌面环境）**
```bash
Ctrl + Alt + Backspace
```
🔹 **注销 SSH 远程会话**
```bash
exit
```
或者直接 **按 `Ctrl + D`**。

📌 **注意**：`logout` **仅适用于终端模式**，在 GUI 桌面环境无效！

---

## 🎯 4.3 用户管理基础命令

### 🆕 4.3.1 创建新用户

📌 **创建一个新用户（如 `john`）**
```bash
sudo adduser john
```
然后按照提示设置 **密码** 和 **用户信息**。

📌 **删除用户**
```bash
sudo deluser john
```
📌 **删除用户及其主目录**
```bash
sudo deluser --remove-home john
```

### 🔑 4.3.2 修改用户密码

📌 **修改当前用户密码**
```bash
passwd
```
📌 **修改其他用户密码**（需要管理员权限）
```bash
sudo passwd john
```

---

## 🎉 4.4 总结

✅ **掌握 Linux 关机、重启命令，避免数据丢失**。
✅ **学会正确的用户登录方式，建议使用普通用户 + `sudo`**。
✅ **学会切换用户、注销用户，并使用 `exit` 退出会话**。
✅ **掌握基本的用户管理命令，如 `adduser`、`passwd`**。
